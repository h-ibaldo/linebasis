### Linabasis Auth API Tests
### Use with VS Code REST Client extension or similar

@baseUrl = http://localhost:5173
@email = test@example.com
@password = password123

### 1. Register a new user
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "email": "{{email}}",
  "password": "{{password}}",
  "name": "Test User"
}

### 2. Login
# @name login
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "{{email}}",
  "password": "{{password}}"
}

### 3. Get current user (requires access token from login)
@accessToken = {{login.response.body.accessToken}}
GET {{baseUrl}}/api/auth/me
Authorization: Bearer {{accessToken}}

### 4. Refresh token
@refreshToken = {{login.response.body.refreshToken}}
POST {{baseUrl}}/api/auth/refresh
Content-Type: application/json

{
  "refreshToken": "{{refreshToken}}"
}

### 5. Logout
POST {{baseUrl}}/api/auth/logout
Content-Type: application/json

{
  "refreshToken": "{{refreshToken}}"
}

### 6. Try to use logged out token (should fail)
POST {{baseUrl}}/api/auth/refresh
Content-Type: application/json

{
  "refreshToken": "{{refreshToken}}"
}

### Test invalid credentials
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "{{email}}",
  "password": "wrongpassword"
}

### Test invalid token
GET {{baseUrl}}/api/auth/me
Authorization: Bearer invalid-token-here
